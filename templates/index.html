<html>
<head>
    <title>The Travelling Saleswoman</title>
    <!-- Bootstrap -->
   
    <!-- Latest compiled and minified CSS -->
    <!--<link rel="stylesheet" href="static/dist/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="static/js/jquery-ui-1.11.2.custom/jquery-ui.theme.min.css"-->

    <!-- Optional theme -->
    <!--<link rel="stylesheet" href="static/dist/css/bootstrap-theme.min.css">-->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="static/css/main.css">
</head>
<body>
    <a name="top" id="top"></a> 
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" 
          data-toggle="collapse" data-target="#navbar" aria-expanded="false" 
          aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">the travelling salesWoman</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#top">Solve</a></li>
            <li><a href="#technology">Technology</a></li>
            <li><a href="#modes">Solution Modes</a></li>
            <li><a href="#algorithms">Algorithms</a></li>
            <li><a href="#about">About</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

        <div id="map-canvas" class="map"></div>

          <div class="panel panel-primary intro" id="intro">
            <div class="panel-heading">
              <h3 class="panel-title">The Problem</h3>
            </div>
            <div class="panel-body">
              <p>How can you most economically travel a route between chosen cities, visiting each city exactly once?</p>
              <p>Though there is no exact mathematical solution for this problem, 
                there algorithms may give acceptable results. Explore some of those solutions here.</p>
             <button id="continue" class="btn btn-default">Continue</button> 
            </div>
        </div>

         <div class="panel panel-primary cities" id="cities">
            <div class="panel-heading">
              <h3 class="panel-title">Cities</h3>
            </div>
            <div class="panel-body">
              <p>Click on the map to select cities or select from the dropdown.</p>
              <form id="cityinput">
                <div class="form-group">
              <select multiple="multiple" id="city_group" name="city_group" size="10" class="form-control">
              </select>
                </div>
              <button id="drop" type="submit" class="btn btn-default">Select</button>
              </form>
            </div>
        </div>

        <div class="panel panel-primary user_input" id="input">
            <div class="panel-heading">
              <h3 class="panel-title">Input</h3>
            </div>
            <div class="panel-body">
                <form id="userinput" >                   
                    <div class="form-group">
                    <label for="algorithm">Algorithm:</label>
                    <select id="algorithm" name="algorithm">
                        <option value="nearest">Nearest Neighbor</option>
                        <option value="hillclimb">Basic Hillclimb</option>
                        <option value="hill_restart">Hillclimb & Restart</option>  
                        <option value="annealing">Simulated Annealing</option>
                    </select>
                    <button id="select_algorithm" class="btn btn-default">Select</button>
                  </div>


                    <div class = "mode_class">
                    <label for="mode">Mode:</label>
                    <select id="mode" name="mode">
                        <option value="as_the_crow_flies">As the Crow Flies</option>
                        <option value="roads">Drive</option>
                        <option value="airline">Fly</option>
                    </select>
                    </div>
                    

                    <div class = "nearest_neighbor">
                    <label for="start">Start City:</label>
                    <select id="start" name="start">
                    </select>
                    </div>
                    
                    <div class = "hill_anneal">
                    <label for="move_operator">Move Operator:</label>
                    <select id="move_operator" name="move_operator">
                        <option value="swapped_cities">Swap Cities</option>
                        <option value="reversed_sections">Swap Edges</option>
                    </select>
                    <br>
                    <label for="cycles">Maximum Tries:</label>
                    <input type="text" id="cycles" name="cycles" value = "100" size="10">
                    </div>

                    <div class = "anneal">
                    <label for="start_temp">Start Temp:</label>
                    <input type="text" id="start_temp" name="start_temp" value = "10" size="10">
                    <br>
                    <label for="alpha">alpha (&lt;1):</label>
                    <input type="text" id="alpha" name="alpha" value = ".5" size="10">
                    </div>

                    <div class = "button">
                    <button type="submit" id="submitbutton" class="btn btn-default">Start</button>
                    </div>

                </form>
                  <div class=".btn-group btn-group-xs control" role="group">

                   <button id="stop" class="btn btn-default">Stop</button> 
                   <button id="clear" class="btn btn-default">Clear</button>
                   <button id="next" class="btn btn-default">New Algorithm</button>
                   <button id="new" class="btn btn-default">New Cities</button>

                  </div>
            </div>
        </div>



        <div class="panel panel-primary results" id="results">
            <div class="panel-heading">
              <h3 class="panel-title">Results</h3>
            </div>
            <div class="panel-body">
              <h5 class="iterations">Number of iterations = <span id = "number"></span></h5>
              <h5>Result: <span id = "score"></span></h5>
              <h5 class="cost">Cost: <span id = "cost"></span></h5>
              <h5>Route: <span id = "route"></span></h5>
            </div>
        </div>
        <a name="technology" id="technology"></a> 
        <div id="technology" class="techdiv">
          <h1>Technology Stack</h1>
          <ul>
            <li>Google Maps API</li>
            <li>Google Directions API - for road data</li>
            <li>QPX Express API - airfares and flight durations</li>
            <li>PostgreSQL and SQLAlchemy</li>
            <li>Python</li>
            <li>Flask</li>
            <li>Javascript/JQuery/JQuery UI</li>
            <li>HTML/CSS/Bootstrap</li>
          </ul>
        </div>

        <a name="modes" id="modes"></a> 
        <div id="modediv" class="modediv">
          <h1>Solution Modes</h1>
          <ul>
            <li>As the Crow Flies
            <p>Distance between cities is calculated using the spherical law of 
              cosines to approximate the curvature of the earth.</p></li>
            <li>Drive
            <p>The Google Directions API was used to find the best route between two
              cities. The JSON request sent latitude and longitude for the city. The
              returned data included total road distance between the endpoints and 
              encoded polyline data to use for drawing the route and is stored in 
              a PostgreSQL database. Thredaing is used to load data in the background 
              at runtime.</p></li>
            <p>Results show total tour miles and tour cost assuming $.56 per mile to
              drive and $30/hour for our saleswomn's time.
            <li>Fly Commercial
              <p>Google's QPX Express API was queried for December 15, 2014 and the 10
                least expensive routes were returned. The cost and time for each of
                the 10 options was stored in the PostgreSQL database. At run time, the best
                option is selected based on the optimum combination of fare and time. This
                weight was applied to the edges for optimization. The distance matrix
                in this mode is not symetric since the cost from city A to B does not necessarily
                equal the cost from city B to A.</p>
              <p>Total cost was calculated by adding the fares for the tour and the 
              travel cost of $30/hour.</p>   
            </li>

          </p>
        </div>

        <a name="algorithms" id="algorithms"></a> 
        <div id="algorithms" class="algorithmdiv">
          <h1>Algorithms</h1>
          <h3>Nearest Neighbor</h3>
          <p>Nearest neighbor simply takes the starting city and simplistically
            travels to the next available city. The process is repeated until the
            possibilities are exhausted and the loop is closed. This solution more
            often then not is far from optimum.</p>
          <h3>Hillclimb</h3>
          <p>Hillclimb explores neighboring solution states by employing a move
            operator. An initial random solution is found and then a neighboring
            state is evaluated. If the neighbor state results in a better solution
            then it is accepted and the process is repeated until no better solutions
            can be found.</p>
          <p>The choice of move operator determines the neighbor state:
            <ul>
              <li>Swap cities - the order of two successive cities is reversed.</li>
              <li>Swap edges - two edges are disconnected and reconnected to the 
                other's endpoints.</li>
            </ul>
          <p>The problem with the simple Hillclimb is that there may exist many local
            maxima that are not the global maxima. The Hillclimb method can get stuck
            at one of these. The method can be run repeatedly up to a specified number
            of tries a more sophisticated method can be used such as...
          <h3>Simulated Annealing</h3>
          <p>In order to avoid the problem of local maxima, SA will temporarily accept 
            less than optimal solutions. A probability function that decreases over time
            determines whether less than optimal solutions are chosen.</p>
          <p>In this implementation a better solution is always selected and a probability function
            determines whether a sub-optimal value will be accepted. The probability function starts out liberal and becomes more conservative over time, thus narrowing in on 
            a solution.</p>
        </div>

        <a name="about" id="about"></a> 
        <div id="about" class="aboutdiv">
          <h1>About</h1>
          <h3>One woman's journey....</h3>
          <p>Florie travelled (by road) cross country to come to Hackbright and round out
            her developer skills. She lived in a small town in Georgia where she 
            raised a family and freelanced creating websites for local small business
            clients.</p>
          <p>While in Georgia, she created a "Bracelet Builder" app for a client and this sparked her
          interest in all things Javascript. Since being at Hackbright, she has come
          to love and appreciate the "full stack" and wanted to work on a project
          that demonstrated her love of the front end while forcing her to learn
          about backend engineering. Thus the Travelling Saleswoman.</p>
          <h3>The steps on the journey...</h3>
          <ul>
            <li>Static as-the-crow-flies solution with random points</li>
            <li>Static as-the-crow-flies solution with cities on the map</li>
            <li>Visualize the solution steps by introducing animation</li>
            <li>Work with Google's direction API to get road miles and polylines</li>
            <li>Animate the solution for road miles</li>
            <li>Optimize to improve runtime</li>
            <li>Add ability to select a subset of cities from a select list or by
              clicking directly on the map</li>
            <li>Add the Air route data</li>
          </ul>
        </div>


    <div class="footer">
      <div class="container">
        <p>This app was created by <a href ="https://www.linkedin.com/in/fcoggins">Florie Coggins</a> as a solo final project for <a href = "http://www.hackbrightacademy.com/">Hackbright Academy</a> in Fall 2014. You can read more about the implementation and details on the <a href ="https://github.com/fcoggins/travelling-saleswoman">project's Github page</a>.</p>
        <p class="text-muted">&copy;2014 Florinda Bustamante Coggins</p>
      </div>
    </div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="static/js/jquery-ui-1.11.2.custom/jquery-ui.js"></script>
<!--<script src="static/dist/js/bootstrap.min.js"></script>-->
<script type="text/javascript"
     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZIoOX8afLsDVhpqC788YraO1ApQLwwcg">
</script>
<script src="/static/js/markerwithlabel.js"></script>
<!--<script src="/static/js/gmapi.js"></script>-->
<script src="/static/js/tsp.js"></script>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58043957-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>